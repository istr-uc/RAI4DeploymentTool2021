<?xml version="1.0" encoding="UTF-8"?>
<pasys:ComputationalSystem
    xmi:version="2.0"
    xmlns:xmi="http://www.omg.org/XMI"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:pasys="www.unican.es/ISTR/P3forI4/pasys"
    xsi:schemaLocation="www.unican.es/ISTR/P3forI4/pasys ../metamodels/PABM_Metamodel.ecore#//pasys"
    name="P3SimMast_10PN"
    date="2018-07-17T09:30:00"
    authors="Jose M. Drake"
    targetPlatformName="Lab_TR_10PN"
    doc="Ejecucion de SimMast sobre la plataforma Lab_TR_10PN: Se utilizan 10 nodos de procesamiento cada uno con 4 procesadores; Solo un broker Kafka en el nudo puesto_14; Solo un broker Zookeeper en el nudo puesto_14; y un servidor Prometheus sobre el nudo puesto_14.">
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_05"
      id="puesto_05"
      concurrencyLevel="4"
      ip="127.31.16.52"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_05"
        id="pnm_05"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        monitoringTime="10"
        uMetric="//@ownedElements.19"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_06"
      id="puesto_06"
      concurrencyLevel="4"
      ip="127.31.16.46"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_06"
        id="pnm_06"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        monitoringTime="10"
        uMetric="//@ownedElements.20"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_07"
      id="puesto_07"
      concurrencyLevel="4"
      ip="127.31.16.51"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_07"
        id="pnm_07"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.21"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_08"
      id="puesto_08"
      concurrencyLevel="4"
      ip="127.31.16.47"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_08"
        id="pnm_08"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.22"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_09"
      id="puesto_09"
      concurrencyLevel="4"
      ip="127.31.16.55"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_09"
        id="pnm_09"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.23"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_10"
      id="puesto_10"
      concurrencyLevel="4"
      ip="127.31.16.58"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_10"
        id="pnm_10"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.24"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_11"
      id="puesto_11"
      concurrencyLevel="4"
      ip="127.31.16.23"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_11"
        id="pnm_11"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.25"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_12"
      id="puesto_12"
      concurrencyLevel="4"
      ip="127.31.16.54"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_12"
        id="pnm_12"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.26"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_13"
      id="puesto_13"
      concurrencyLevel="4"
      ip="127.31.16.49"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_13"
        id="pnm_13"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.27"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:PhysicalProcessingNode"
      name="Puesto_14"
      id="puesto_14"
      concurrencyLevel="4"
      ip="127.31.16.53"
      os="Linux:Ubuntu 14.04.2">
    <ownedMeters
        xsi:type="pasys:NodeResourceMeter"
        artifactName="nodeExporter.sh"
        artifactLocator="/home/apache/prometheus/exporters/nodeExporter"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        name="PrometheusNodeMeter_14"
        id="pnm_14"
        monitoringServer="//@ownedElements.12"
        monitoringPort="9100"
        uMetric="//@ownedElements.28"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:ZookeeperServer"
      name="Zookeeper_Server"
      id="zkServer"
      artifactName="zkServer.sh"
      artifactLocator="/home/apache/zookeeper/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      host="//@ownedElements.9"
      target="//@ownedElements.31"/>
  <ownedElements
      xsi:type="pasys:KafkaServer"
      name="Kafka_Server"
      id="kkServer"
      artifactName="kafka-server-start.sh"
      artifactLocator="/home/apache/kafka/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      host="//@ownedElements.9"
      target="//@ownedElements.30"
      clientPort="9092"/>
  <ownedElements
      xsi:type="pasys:PrometheusServer"
      name="Prometheus_Server"
      id="prServer"
      artifactName="prometheus.sh"
      artifactLocator="/home/apache/prometheus"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      host="//@ownedElements.1"
      monitorizedMeters="//@ownedElements.17/@ownedTaskExecutors.0/@ownedMeters.0 //@ownedElements.18/@ownedTaskExecutors.0/@ownedMeters.0 //@ownedElements.0/@ownedMeters.0 //@ownedElements.1/@ownedMeters.0 //@ownedElements.2/@ownedMeters.0 //@ownedElements.3/@ownedMeters.0 //@ownedElements.4/@ownedMeters.0 //@ownedElements.5/@ownedMeters.0 //@ownedElements.6/@ownedMeters.0 //@ownedElements.7/@ownedMeters.0 //@ownedElements.8/@ownedMeters.0 //@ownedElements.9/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:KafkaWorkloadStreamData"
      name="P3SimMastMdlTopic"
      id="mdlTopic"
      artifactName="kafka-topics.sh"
      artifactLocator="/home/apache/kafka/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      numPartitions="1"
      numReplication="1"
      messageSize="4096"
      holder="//@ownedElements.11"/>
  <ownedElements
      xsi:type="pasys:KafkaWorkloadStreamData"
      name="P3SimMastEndTopic"
      id="endTopic"
      artifactName="kafka-topics.sh"
      artifactLocator="/home/apache/kafka/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      numPartitions="1"
      numReplication="1"
      messageSize="16"
      holder="//@ownedElements.11">
    <arguments>endArg1</arguments>
    <arguments>endArg2</arguments>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:KafkaWorkloadStreamData"
      name="P3SimMastCfgTopic"
      id="cfgTopic"
      artifactName="kafka-topics.sh"
      artifactLocator="/home/apache/kafka/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      numPartitions="10"
      numReplication="1"
      messageSize="512"
      holder="//@ownedElements.11">
    <arguments>cfgArg1</arguments>
    <arguments>cfgArg2</arguments>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:KafkaWorkloadStreamData"
      name="P3SimMastResTopic"
      id="resTopic"
      artifactName="kafka-topics.sh"
      artifactLocator="/home/apache/kafka/bin"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      numPartitions="1"
      numReplication="1"
      messageSize="1024"
      holder="//@ownedElements.11">
    <arguments>resArg1</arguments>
    <arguments>resArg2</arguments>
    <ownedMeters
        name="StreamRateMeterResTopic"
        id="srmRes"
        monitoringPort="8001"/>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:Workflow"
      name="MdlSimulation_Workflow"
      id="wfMdlSim"
      artifactName=""
      artifactLocator=""
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      rootTask="//@ownedElements.17/@ownedTasks.0"
      scheduler="//@ownedElements.29">
    <ownedStreamData
        xsi:type="pasys:KafkaFlowStreamData"
        name="Closed_Model_Message"
        id="fsdClosedModel"
        artifactName="kafka-topics.sh"
        artifactLocator="/home/apache/kafka/bin"
        scriptFolderPath="/home/apache/P3SimMast/script"
        configFolderPath="/home/apache/P3SimMast/config"
        dataFolderPath="/home/apache/P3SimMast/data"
        source="//@ownedElements.15"
        predecessor="//@ownedElements.17/@ownedStreamData.2"
        holder="//@ownedElements.11"/>
    <ownedStreamData
        xsi:type="pasys:KafkaFlowStreamData"
        name="Loaded_Model_Message"
        id="fsdLoadedModel"
        artifactName="kafka-topics.sh"
        artifactLocator="/home/apache/kafka/bin"
        scriptFolderPath="/home/apache/P3SimMast/script"
        configFolderPath="/home/apache/P3SimMast/config"
        source="//@ownedElements.13"
        predecessor="//@ownedElements.13"
        holder="//@ownedElements.11"/>
    <ownedStreamData
        xsi:type="pasys:DerivedStreamData"
        name="Ended_Loaded_Message"
        id="dsdEndedModel"
        pattern="&quot;SELECT fsdLoadedModel WHEN endTopic AND (NUM(cfgTopic)=NUM(resTopic))"
        inputs="//@ownedElements.14 //@ownedElements.15 //@ownedElements.17/@ownedStreamData.1"/>
    <ownedTasks
        name="Load_Model_Task"
        id="taskLoadModel"
        implementingClassName="es/unican/precon/loadModelTask"
        returnedStreamData="//@ownedElements.17/@ownedStreamData.1"
        triggerStreamData="//@ownedElements.13"/>
    <ownedTasks
        name="Close_Model_Task"
        id="taskCloseModel"
        implementingClassName="es/unican/precon/closeModelTask"
        returnedStreamData="//@ownedElements.17/@ownedStreamData.0"
        triggerStreamData="//@ownedElements.17/@ownedStreamData.2"/>
    <ownedMeters
        name="WorkflowMeter_MdlSim"
        id="wflmeterMdlSim"
        monitoringPort="8002"/>
    <ownedTaskExecutors
        name="Load_CloseMdlTasksExecutor"
        id="texLoadCloseMdl"
        artifactName="Load_CloseMdl.jar"
        artifactLocator="./installer"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        executedTasks="//@ownedElements.17/@ownedTasks.1 //@ownedElements.17/@ownedTasks.0">
      <ownedMeters
          name="tpaCloseMdlMeter"
          id="tpaCloseMdlMeter"
          monitoringServer="//@ownedElements.12"
          monitoringPort="8084"
          monitoringTime="10"
          metric="//@ownedElements.32"/>
    </ownedTaskExecutors>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:Workflow"
      name="CfgSimulation_Workflow"
      id="wfCfgSim"
      artifactName="CfgSimulation.jar"
      artifactLocator="/home/apache/P3SimMast/artifacts"
      scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
      configFolderPath="/home/apache/P3SimMast/configFolder"
      scheduler="//@ownedElements.29">
    <ownedTasks
        name="Cfg_Execute_Task"
        id="taskCfgExecution"
        implementingClassName="es/unican/precon/cfgExecutionTask"
        returnedStreamData="//@ownedElements.16"
        triggerStreamData="//@ownedElements.15"/>
    <ownedTaskExecutors
        name="ExecutionCfgTaskExecutor"
        id="texExecCfg"
        artifactName="ExecutionCfg.jar"
        artifactLocator="./installer"
        scriptFolderPath="/home/apache/P3SimMast/scriptFolder"
        configFolderPath="/home/apache/P3SimMast/configFolder"
        executedTasks="//@ownedElements.18/@ownedTasks.0">
      <ownedMeters
          name="tpaExecutionCfgMeter"
          id="tpaExecutionCfgMeter"
          monitoringServer="//@ownedElements.12"
          monitoringPort="8084"
          monitoringTime="15"
          metric="//@ownedElements.33"/>
    </ownedTaskExecutors>
  </ownedElements>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_05"
      id="num_05"
      target="//@ownedElements.0"
      meter="//@ownedElements.0/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_06"
      id="num_06"
      target="//@ownedElements.1"
      meter="//@ownedElements.1/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_07"
      id="num_07"
      target="//@ownedElements.2"
      meter="//@ownedElements.2/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_08"
      id="num_08"
      target="//@ownedElements.3"
      meter="//@ownedElements.3/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_09"
      id="num_09"
      target="//@ownedElements.4"
      meter="//@ownedElements.4/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_10"
      id="num_10"
      target="//@ownedElements.5"
      meter="//@ownedElements.5/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_11"
      id="num_11"
      target="//@ownedElements.6"
      meter="//@ownedElements.6/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_12"
      id="num_12"
      target="//@ownedElements.7"
      meter="//@ownedElements.7/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_13"
      id="num_13"
      target="//@ownedElements.8"
      meter="//@ownedElements.8/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:ProcessingNodeUtilization"
      name="NodeUtilizationMetric_14"
      id="num_14"
      target="//@ownedElements.9"
      meter="//@ownedElements.9/@ownedMeters.0"/>
  <ownedElements
      xsi:type="pasys:NodeScheduler"
      name="P3SimMast_10PNScheduler"
      target="//@ownedElements.30"
      workflows="//@ownedElements.17 //@ownedElements.18"/>
  <ownedElements
      xsi:type="pasys:NodeCluster"
      name="kafkaCluster"
      id="kafkaCluster"
      nodes="//@ownedElements.0 //@ownedElements.1 //@ownedElements.2 //@ownedElements.3 //@ownedElements.4 //@ownedElements.5 //@ownedElements.6 //@ownedElements.7 //@ownedElements.8 //@ownedElements.9"/>
  <ownedElements
      xsi:type="pasys:NodeCluster"
      name="zookeeperCluster"
      id="zkCluster"
      nodes="//@ownedElements.9"/>
  <ownedElements
      xsi:type="pasys:TaskProcessingAmount"
      name="LoadCloseMdlMetric"
      id="tpaLoadModel"
      target="//@ownedElements.17/@ownedTasks.0"
      meter="//@ownedElements.17/@ownedTaskExecutors.0/@ownedMeters.0"
      expectedMaxTPA="600"
      expectedMinTPA="100"/>
  <ownedElements
      xsi:type="pasys:TaskProcessingAmount"
      name="ExecuteCfgTPAMetric"
      id="tpaExecuteCfg"
      target="//@ownedElements.18/@ownedTasks.0"
      meter="//@ownedElements.18/@ownedTaskExecutors.0/@ownedMeters.0"
      expectedMaxTPA="500"
      expectedMinTPA="200"/>
</pasys:ComputationalSystem>
